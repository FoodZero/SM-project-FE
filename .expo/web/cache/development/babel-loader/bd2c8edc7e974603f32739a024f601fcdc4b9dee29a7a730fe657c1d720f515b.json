{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nvar _jsxFileName = \"C:\\\\Users\\\\eleme\\\\SM-project-FE\\\\SM-project-FE-1\\\\screens\\\\kakaologin.js\",\n  _this = this;\nimport React from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { WebView } from 'react-native-webview';\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useNavigation } from \"@react-navigation/native\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar REST_API_KEY = '40e37f5506ddcffb0187bbaf58091741';\nvar REDIRECT_URI = 'http://172.30.1.85:19006/home';\nvar INJECTED_JAVASCRIPT = `window.ReactNativeWebView.postMessage('message from webView')`;\nvar KaKaoLogin = function KaKaoLogin() {\n  var navigation = useNavigation();\n  function KakaoLoginWebView(data) {\n    var exp = \"code=\";\n    var condition = data.indexOf(exp);\n    if (condition != -1) {\n      var authorize_code = data.substring(condition + exp.length);\n      requestToken(authorize_code);\n    }\n    ;\n  }\n  var requestToken = function () {\n    var _ref = _asyncToGenerator(function* (authorize_code) {\n      var AccessToken = \"none\";\n      axios({\n        method: 'post',\n        url: 'https://kauth.kakao.com/oauth/token',\n        params: {\n          grant_type: 'authorization_code',\n          client_id: REST_API_KEY,\n          redirect_uri: REDIRECT_URI,\n          code: authorize_code\n        }\n      }).then(function (response) {\n        AccessToken = response.data.access_token;\n        storeData(AccessToken);\n      }).catch(function (error) {\n        console.log('error', error);\n      });\n      navigation.navigate(\"Signup\", {\n        screen: \"Signup\"\n      });\n    });\n    return function requestToken(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var storeData = function () {\n    var _ref2 = _asyncToGenerator(function* (returnValue) {\n      try {\n        yield AsyncStorage.setItem('userAccessToken', returnValue);\n      } catch (error) {}\n    });\n    return function storeData(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsxDEV(View, {\n    style: Styles.container,\n    children: _jsxDEV(WebView, {\n      style: {\n        flex: 1\n      },\n      originWhitelist: ['*'],\n      scalesPageToFit: false,\n      source: {\n        uri: `https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=${REST_API_KEY}&redirect_uri=${REDIRECT_URI}`\n      },\n      injectedJavaScript: INJECTED_JAVASCRIPT,\n      javaScriptEnabled: true,\n      onMessage: function onMessage(event) {\n        KakaoLoginWebView(event.nativeEvent[\"url\"]);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 7\n  }, _this);\n};\nexport default KaKaoLogin;\nvar Styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: 24,\n    backgroundColor: '#fff'\n  }\n});","map":{"version":3,"names":["React","View","StyleSheet","WebView","axios","AsyncStorage","useNavigation","jsxDEV","_jsxDEV","REST_API_KEY","REDIRECT_URI","INJECTED_JAVASCRIPT","KaKaoLogin","navigation","KakaoLoginWebView","data","exp","condition","indexOf","authorize_code","substring","length","requestToken","_ref","_asyncToGenerator","AccessToken","method","url","params","grant_type","client_id","redirect_uri","code","then","response","access_token","storeData","catch","error","console","log","navigate","screen","_x","apply","arguments","_ref2","returnValue","setItem","_x2","style","Styles","container","children","flex","originWhitelist","scalesPageToFit","source","uri","injectedJavaScript","javaScriptEnabled","onMessage","event","nativeEvent","fileName","_jsxFileName","lineNumber","columnNumber","_this","create","marginTop","backgroundColor"],"sources":["C:/Users/eleme/SM-project-FE/SM-project-FE-1/screens/kakaologin.js"],"sourcesContent":["import React from \"react\";\r\nimport { View, StyleSheet } from \"react-native\";\r\nimport { WebView } from 'react-native-webview';\r\nimport axios from 'axios';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { useNavigation } from \"@react-navigation/native\";\r\n\r\nconst REST_API_KEY = '40e37f5506ddcffb0187bbaf58091741';\r\nconst REDIRECT_URI = 'http://172.30.1.85:19006/home';\r\nconst INJECTED_JAVASCRIPT = `window.ReactNativeWebView.postMessage('message from webView')`;\r\n\r\nconst KaKaoLogin = () => {\r\n\r\n    const navigation = useNavigation();\r\n  \r\n    function KakaoLoginWebView (data) {\r\n      const exp = \"code=\";\r\n      var condition = data.indexOf(exp);    \r\n      if (condition != -1) {\r\n        var authorize_code = data.substring(condition + exp.length);\r\n        //console.log(authorize_code);\r\n        requestToken(authorize_code);\r\n      };\r\n    }\r\n  \r\n    const requestToken = async (authorize_code) => {\r\n      var AccessToken = \"none\";\r\n      axios ({\r\n        method: 'post',\r\n        url: 'https://kauth.kakao.com/oauth/token',\r\n        params: {\r\n          grant_type: 'authorization_code',\r\n          client_id: REST_API_KEY,\r\n          redirect_uri: REDIRECT_URI,\r\n          code: authorize_code,\r\n        },\r\n      }).then((response) => {\r\n        AccessToken = response.data.access_token;\r\n        //console.log(AccessToken);\r\n        //requestUserInfo(AccessToken);\r\n        storeData(AccessToken);\r\n      }).catch(function (error) {\r\n        console.log('error', error);\r\n      })\r\n      navigation.navigate(\"Signup\", { screen: \"Signup\" } );\r\n    };\r\n  \r\n    // function requestUserInfo(AccessToken)  {\r\n    //   axios ({\r\n    //     method: 'GET',\r\n    //     url: 'https://kapi.kakao.com/v2/user/me',\r\n    //     headers: {\r\n    //       Authorization : `Bearer ${AccessToken}`\r\n    //     },\r\n    //   }).then((response) => {\r\n    //     var user_emil = response.data.kakao_account.email;\r\n    //     var user_range = response.data.kakao_account.age_range;\r\n    //     var user_gender = response.data.kakao_account.gender;\r\n    //     console.log(\"user_emil\", user_emil);\r\n    //     console.log(\"user_range\", user_range);\r\n    //     console.log(\"user_gender\", user_gender);\r\n    //   }).catch(function (error) {\r\n    //     console.log('error', error);\r\n    //   })\r\n    //   return;\r\n    // }\r\n  \r\n    const storeData = async (returnValue) => {\r\n      try {\r\n        await AsyncStorage.setItem('userAccessToken', returnValue);\r\n      } catch (error) {\r\n      }\r\n    }\r\n  \r\n    return (\r\n      <View style={Styles.container}>      \r\n        <WebView\r\n          style={{ flex: 1 }}\r\n          originWhitelist={['*']}\r\n          scalesPageToFit={false}\r\n          source={{\r\n            uri: `https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=${REST_API_KEY}&redirect_uri=${REDIRECT_URI}`,\r\n          }}\r\n          injectedJavaScript={INJECTED_JAVASCRIPT}\r\n          javaScriptEnabled\r\n          onMessage={event => { KakaoLoginWebView(event.nativeEvent[\"url\"]); }}\r\n        />\r\n      </View>\r\n    )\r\n  }\r\n  \r\n  export default KaKaoLogin;\r\n  \r\n  const Styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      marginTop: 24,\r\n      backgroundColor: '#fff',\r\n    },    \r\n  });"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}